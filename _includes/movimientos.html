<!DOCTYPE html>
<html>
<head>
    <title>Movimientos</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
      <form id="contact-form" onsubmit="return submitToAPI(event)">
            <h4>Name:</h4>
            <input type="text" 
                  style="height:35px;" 
                  id="name-input" 
                  placeholder="Enter name here…" 
                  class="form-control" 
                  style="width:100%;" /><br/>
            <h4>Phone:</h4>
            <input type="phone" 
                  style="height:35px;" 
                  id="phone-input" 
                  placeholder="Enter phone number" 
                  class="form-control" 
                  style="width:100%;"/><br/>
            <h4>Email:</h4>
            <input type="email" 
                  style="height:35px;" 
                  id="email-input" 
                  placeholder="Enter email here…" 
                  class="form-control" 
                  style="width:100%;"/><br/>
            <h4>How can we help you?</h4>
            <textarea 
                  id="description-input" 
                  rows="3" 
                  placeholder="Enter your message…" 
                  class="form-control" 
                  style="width:100%;"></textarea><br/>
            <button type="submit" 
                  class="btn btn-lg" 
                  style="margin-top:20px;">Submit</button>
      </form>

    <script>
    function submitToAPI(e) {
       e.preventDefault();
       console.log('Form submission started'); // Debug log

       var URL = "https://9nrsbn1zu9.execute-api.us-east-1.amazonaws.com/dev-v1/contact";

       var name = $("#name-input").val();
       var phone = $("#phone-input").val();
       var email = $("#email-input").val();
       var desc = $("#description-input").val();
       
       // Form validation
       if (name.length < 2) {
           alert("Name can not less than 2 char");
           return false;
       }
       if (phone.length !== 10 || !/^\d+$/.test(phone)) {
           alert("Please enter valid mobile number");
           return false;
       }
       if (!email || !/^[\w-\.]+@([\w-]+\.)+[\w-]{2,6}$/.test(email)) {
           alert("Please enter valid email address");
           return false;
       }

       var data = {
          name: name,
          phone: phone,
          email: email,
          desc: desc
       };

       console.log('Sending data:', data); // Debug log

       $.ajax({
         type: "POST",
         url: URL,
         dataType: "json",
         crossDomain: true,
         contentType: "application/json; charset=utf-8",
         data: JSON.stringify(data),
         success: function(response) {
           console.log('Success:', response); // Debug log
           alert("Successful");
           document.getElementById("contact-form").reset();
         },
         error: function(jqXHR, textStatus, errorThrown) {
           console.log('Error:', textStatus, errorThrown); // Debug log
           alert("Unsuccessful: " + textStatus);
         }
       });

       return false;
    }
    </script>
</body>
</html>






